(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["common/app"];var n=t.n(e);const r=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var o=t.n(r);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}const a=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var c=t.n(a),s="liplum-trends-widget";const d=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(d);const l=flarum.core.compat["common/utils/ItemList"];var f=t.n(l);const p=flarum.core.compat["common/components/Link"];var h=t.n(p),g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.trends=[],e}var r,o;o=t,(r=e).prototype=Object.create(o.prototype),r.prototype.constructor=r,i(r,o);var a=e.prototype;return a.className=function(){return"liplum-trends-widget"},a.icon=function(){return"fas fa-fire-alt"},a.title=function(){return n().translator.trans(s+".forum.widget.title")},a.content=function(){var t=this;if(this.loading)return m(u(),null);if(!this.trends||0===this.trends.length)return n().translator.trans(s+".forum.widget.empty");var e=new(f());return this.trends.forEach((function(n){e.add(n.id,m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},m(h(),{href:n.attributes.shareUrl,style:{fontWeight:"bold"}},n.attributes.title),m("div",{style:{fontSize:"0.8em",color:t.trends.indexOf(n)<3?"red":void 0,marginTop:"5px"}},n.attributes.commentCount)))})),m("div",{style:{padding:"10px"}},e.toArray())},a.oncreate=function(e){t.prototype.oncreate.call(this,e),this.fetchTrends()},a.fetchTrends=function(){var t=this;this.loading=!0,n().request({method:"GET",url:n().forum.attribute("apiUrl")+"/trends/recent"}).then((function(e){t.trends=e.data,t.loading=!1,m.redraw()})).catch((function(e){console.error("Error fetching trends:",e),t.loading=!1,m.redraw()}))},e}(c());n().initializers.add(s,(function(){var t;t=n(),(new(o())).add({key:"liplum-trends-widget",component:g,isDisabled:!1,isUnique:!0,placement:"end",position:2}).extend(t,s)}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map