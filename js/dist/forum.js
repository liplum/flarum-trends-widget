(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["common/app"];var r=t.n(e);const n=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var o=t.n(n);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}const i=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var s=t.n(i),c="liplum-trends-widget";const u=flarum.core.compat["common/components/LoadingIndicator"];var l=t.n(u);const d=flarum.core.compat["common/utils/ItemList"];var f=t.n(d);const p=flarum.core.compat["common/components/Link"];var h=t.n(p),g=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).loading=!0,e.trends=[],e}var n,o;o=t,(n=e).prototype=Object.create(o.prototype),n.prototype.constructor=n,a(n,o);var i=e.prototype;return i.className=function(){return"liplum-trends-widget"},i.icon=function(){return"fas fa-fire-alt"},i.title=function(){return r().translator.trans(c+".forum.widget.title")},i.content=function(){if(this.loading)return m(l(),null);if(!this.trends||0===this.trends.length)return r().translator.trans(c+".forum.widget.empty");var t=new(f());return this.trends.forEach((function(e){t.add(e.id,m("div",{className:"liplum-trends-item"},m(h(),{href:e.attributes.shareUrl},e.attributes.title),m("div",{className:"liplum-trends-meta"},r().translator.trans(c+".forum.widget.comments",{count:e.attributes.commentCount}))))})),m("div",{className:"liplum-trends-list"},t.toArray())},i.oncreate=function(e){t.prototype.oncreate.call(this,e),this.fetchTrends()},i.fetchTrends=function(){var t=this;this.loading=!0,r().request({method:"GET",url:r().forum.attribute("apiUrl")+"/trends"}).then((function(e){t.trends=e.data,t.loading=!1,m.redraw()})).catch((function(e){console.error("Error fetching trends:",e),t.loading=!1,m.redraw()}))},e}(s());r().initializers.add(c,(function(){var t;t=r(),(new(o())).add({key:"liplum-trends-widget",component:g,isDisabled:!1,isUnique:!0,placement:"end",position:2}).extend(t,c)}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map