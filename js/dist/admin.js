(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["admin/app"];var n=t.n(e);const r=flarum.core.compat["common/app"];var o=t.n(r);const a=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var i=t.n(a);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}const l=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var c=t.n(l),d="liplum-trends-widget";const u=flarum.core.compat["common/components/LoadingIndicator"];var p=t.n(u);const f=flarum.core.compat["common/utils/ItemList"];var g=t.n(f);const h=flarum.core.compat["common/components/Link"];var y=t.n(h),b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).loading=!0,e.trends=[],e}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,s(n,r);var a=e.prototype;return a.className=function(){return"liplum-trends-widget"},a.icon=function(){return"fas fa-fire-alt"},a.title=function(){return o().translator.trans(d+".forum.widget.title")},a.content=function(){if(this.loading)return m(p(),null);if(!this.trends||0===this.trends.length)return o().translator.trans(d+".forum.widget.empty");var t=new(g());return this.trends.forEach((function(e){t.add(e.id,m("div",{style:{marginBottom:"10px",padding:"10px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"}},m(y(),{href:e.attributes.shareUrl,style:{fontWeight:"bold"}},e.attributes.title),m("div",{style:{fontSize:"0.8em",color:"#888",marginTop:"5px"}},e.attributes.commentCount)))})),m("div",{style:{padding:"10px"}},t.toArray())},a.oncreate=function(e){t.prototype.oncreate.call(this,e),this.fetchTrends()},a.fetchTrends=function(){var t=this;this.loading=!0,o().request({method:"GET",url:o().forum.attribute("apiUrl")+"/trends/recent"}).then((function(e){t.trends=e.data,t.loading=!1,m.redraw()})).catch((function(e){console.error("Error fetching trends:",e),t.loading=!1,m.redraw()}))},e}(c());n().initializers.add(d,(function(){var t;t=o(),(new(i())).add({key:"liplum-trends-widget",component:b,isDisabled:!1,isUnique:!0,placement:"end",position:2}).extend(t,d),n().extensionData.for(d).registerSetting({setting:d+".recentDays",label:n().translator.trans(d+".admin.recentDays.label"),help:n().translator.trans(d+".admin.recentDays.help"),type:"number"}).registerSetting({setting:d+".limit",label:n().translator.trans(d+".admin.limit.label"),help:n().translator.trans(d+".admin.limit.help"),type:"number"}).registerSetting({setting:d+".hotSpotHours",label:n().translator.trans(d+".admin.hotSpotHours.label"),help:n().translator.trans(d+".admin.hotSpotHours.help"),type:"number"})}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map